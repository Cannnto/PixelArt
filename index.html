<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelArtGenerator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="formulario">
            <div class="labels">
                <label for="">Number of Rows:</label>
                <input type="number" id="rows">
            </div>
            <div class="labels">
                <label for="">Number of Coluns:</label>
                <input type="number" id="coluns">
            </div>
            <div class="labels">
                <button id="submit">Atualizar</button>
                <button id="copy" onclick="copyMap">Copiar</button>
            </div>
        </div>
        <div class="tools">
            <button value="0" id="eraser">borracha</button>
            <input type="color" id="color">
        </div>
    </div>
<script src="Grid.js"></script>
<script src="settings.js"></script>
<script>
        var canvas = document.createElement("canvas");
        var ctx = canvas.getContext("2d");
        document.body.appendChild(canvas);
        canvas.width = 1400;
        canvas.height = 500;
        
        document.querySelector('#submit').addEventListener('click', atualiza);
        document.querySelector('#copy').addEventListener('click', copyMap);
        var eraser = document.querySelector('#eraser');
        var color = document.querySelector('#color');
        eraser.addEventListener('click', eraserOn)

        function eraserOn()
        {   eraser.value = (Number(eraser.value)+1)%2
        }

        function atualiza()
        {   grid.coluns = Number(document.querySelector('#coluns').value);
            grid.rows = Number(document.querySelector('#rows').value);
            grid.updateMap();
        }
            
        function copyMap()
        {   navigator.clipboard.writeText(`[${grid.map}], [${grid.colors}]`)

        }

        var loop = setInterval(loop,1000/30);
        var grid = new Grid(10,10);

        function loop()
        {   ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);      

            grid.draw();
            var mouseCanvasX = (mouse.x - canvas.getBoundingClientRect().left);
            var mouseCanvasY = (mouse.y - canvas.getBoundingClientRect().top);
            console.log(mouseCanvasX, mouse.x)

            if(keys[1] &&  mouseCanvasX >= 0 && mouseCanvasY >= 0 && mouseCanvasX < canvas.width && mouseCanvasY < canvas.height)   grid.update(mouseCanvasX, mouseCanvasY, Number(eraser.value));
            grid.iterate(color.value);
        }
    </script>
</body>
</html>